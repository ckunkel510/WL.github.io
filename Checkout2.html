<!-- put this at the top of your page, after jQuery & Bootstrap are loaded -->
<style>
/* overall wizard wrapper */
.checkout-wizard { max-width: 800px; margin: 2rem auto; }

/* step indicator nav */
.checkout-steps {
  list-style: none;
  display: flex;
  justify-content: space-between;
  margin-bottom: 1.5rem;
  padding: 0;
}
.checkout-steps li {
  flex: 1;
  text-align: center;
  position: relative;
  cursor: pointer;
}
.checkout-steps li:not(:last-child)::after {
  content: '';
  position: absolute;
  top: 1rem;
  right: -50%;
  width: 100%;
  height: 2px;
  background: #ddd;
  z-index: -1;
}
.checkout-steps li::before {
  content: attr(data-step);
  display: inline-block;
  margin-bottom: .5rem;
  width: 2rem;
  height: 2rem;
  line-height: 2rem;
  border-radius: 50%;
  background: #ddd;
  color: #fff;
}
.checkout-steps li.active::before,
.checkout-steps li.completed::before {
  background: #6b0016;
}
.checkout-steps li.completed {
  color: #6b0016;
}

/* step content panes */
.checkout-step { display: none; }
.checkout-step.active { display: block; }

/* nav buttons */
.checkout-nav {
  margin-top: 1.5rem;
  display: flex;
  justify-content: space-between;
}
</style>

<script>
$(document).ready(function(){
  // 1) Define your steps: title + a selector pointing at something unique in that section
  var steps = [
    { title: 'Order details',       selector: '#ctl00_PageBody_TransactionTypeDiv'                },
    { title: 'Shipping & date',      selector: '#ctl00_PageBody_dtRequired_DatePicker_wrapper'      },
    { title: 'Your reference',       selector: '#ctl00_PageBody_PurchaseOrderNumberTextBox'         },
    { title: 'Branch',               selector: '#ctl00_PageBody_BranchSelector'                     },
    { title: 'Delivery address',     selector: '.font-weight-bold:contains("Delivery")'             },
    { title: 'Invoice address',      selector: '.font-weight-bold.mt-4:contains("Invoice")'          },
    { title: 'Special instructions', selector: '.cartTable'                                           }
  ];

  // 2) Build the wizard container & nav
  var $wizard = $('<div class="checkout-wizard"></div>').prependTo('.container');
  var $nav    = $('<ul class="checkout-steps"></ul>').appendTo($wizard);

  // 3) For each step, pull its existing DOM into a new pane
  steps.forEach(function(step, i){
    var stepNum = i+1;
    // nav item
    $('<li data-step="'+stepNum+'">'+step.title+'</li>')
      .appendTo($nav)
      .on('click', function(){ showStep(stepNum); });

    // content pane
    var $pane = $('<div class="checkout-step" data-step="'+stepNum+'"></div>')
      .appendTo($wizard);

    // pull in the existing row (or the closest wrapper) for that selector
    var $el = $(step.selector).closest('.row, .cartTable, .epi-form-group-checkout');
    $pane.append( $el );

    // build Back/Next under each pane
    var $buttons = $('<div class="checkout-nav"></div>').appendTo($pane);
    if (stepNum > 1) {
      $('<button class="btn btn-secondary prev">Back</button>')
        .appendTo($buttons)
        .on('click', function(e){ e.preventDefault(); showStep(stepNum-1); });
    }
    if (stepNum < steps.length) {
      $('<button class="btn btn-primary next">Next</button>')
        .appendTo($buttons)
        .on('click', function(e){ e.preventDefault(); showStep(stepNum+1); });
    } else {
      // last step: yank in your real Continue button here
      // we check both ContinueButton1 and ContinueButton2, grab the last one still in the DOM
      var $continue = $('#ctl00_PageBody_ContinueButton2,#ctl00_PageBody_ContinueButton1').last();
      $buttons.append( $continue.show() );
    }
  });

  // 4) function to switch steps
  function showStep(n){
    // panes
    $wizard.find('.checkout-step').removeClass('active');
    $wizard.find('.checkout-step[data-step="'+n+'"]').addClass('active');
    // nav bullets
    $nav.find('li').removeClass('active completed');
    $nav.find('li[data-step]').each(function(){
      var s = +$(this).attr('data-step');
      if (s < n) $(this).addClass('completed');
      if (s === n) $(this).addClass('active');
    });
    // scroll it into view
    $('html,body').animate({ scrollTop: $wizard.offset().top }, 300);
  }

  // 5) kick it off at step 1
  showStep(1);
});
</script>
